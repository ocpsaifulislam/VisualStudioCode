"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7561],{49470:(e,n,i)=>{i.d(n,{A:()=>o});var t,a=i(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18M8.25 12h7.5"})))}},94971:(e,n,i)=>{i.d(n,{C:()=>d});var t=i(96540),a=i(52290),l=i(86527),o=i(46879);function d(e){var n=e.entityName,i=void 0===n?"story":n;return t.createElement(a.a,{textAlign:"center",testId:"deleteStoryModalText"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",t.createElement(l.N,{target:"_blank",href:o.Xj4,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",i),".")}},43849:(e,n,i)=>{i.d(n,{$:()=>k,J:()=>u});var t=i(5544),a=i(96540),l=i(44402),o=i(42976),d=i(60603),r=i(8963),m=i(34507),s=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":"450px",opacity:e?0:1}},c=(0,a.createContext)({});function u(e){var n=e.children,i=e.post,u=(0,l.l)(),k=(0,a.useRef)(!1),v=(0,m.K)(i.id,"cache-only").explicitSignal,p=(0,a.useState)(v===o.WN.SHOW_LESS),N=(0,t.A)(p,2),S=N[0],g=N[1],f=(0,d.e)(!1),y=(0,t.A)(f,3),b=y[0],h=y[1],F=y[2],E=(0,a.useCallback)((function(e){S&&k.current&&"max-height"===e.propertyName&&(h(),k.current=!1)}),[S]),C=(0,a.useCallback)((function(){k.current=!0,g(!0)}),[]),w=(0,a.useCallback)((function(){g(!1)}),[]),P=(0,a.useMemo)((function(){return{animateShowLess:C,animateUndo:w}}),[C,w]);return a.createElement(c.Provider,{value:P},a.createElement("div",{className:u(s(S)),onTransitionEnd:E},n),a.createElement(r.b,{post:i,isVisible:b,hide:F}))}var k=function(){return(0,a.useContext)(c)}},8963:(e,n,i)=>{i.d(n,{b:()=>E});var t,a=i(5544),l=i(96540),o=i(17045),d=i(53843),r=i(2550),m=i(21335),s=i(71984),c=i(52290),u=i(94170),k=i(49287),v=i(42976),p=i(60603),N=i(55981),S=i(36557),g=i(44402);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},f.apply(null,arguments)}const y=function(e){return l.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.292 9.5v5H2v-5zm1-.124v5.248l.105.08L13 20.484V3.516l-7.603 5.78zm7.905-7.266L4.792 8.5H1.5A.5.5 0 0 0 1 9v6a.5.5 0 0 0 .5.5h3.292l8.405 6.39a.5.5 0 0 0 .803-.398V2.508a.5.5 0 0 0-.803-.398m5.657 7.035a.5.5 0 0 0-.708.707L20.293 12l-2.147 2.148a.5.5 0 1 0 .708.707L21 12.707l2.146 2.148a.5.5 0 1 0 .708-.707L21.707 12l2.147-2.148a.5.5 0 1 0-.708-.707L21 11.293z",clipRule:"evenodd"})))};var b=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function h(e){var n=e.onClick,i=e.isReport,t=e.text,a=e.detail,o=(0,g.l)();return l.createElement("button",{className:o(b(i)),onClick:n},i?l.createElement(N.n,null):l.createElement(y,null),l.createElement(c.a,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},l.createElement(S.kZ,{scale:"M",color:i?"ERROR":"DARKER",clamp:1},t),a&&l.createElement(S.kZ,{scale:"S",clamp:1},a)))}var F=i(34507);function E(e){var n,i,t=e.hide,d=e.isVisible,c=e.post,u=null!==(n=null===(i=c.creator)||void 0===i?void 0:i.id)&&void 0!==n?n:"",v=(0,m.cd)(u).viewerEdge,N=(0,r.A)().viewerId,S=(0,p.e)(!1),g=(0,a.A)(S,3),f=g[0],y=g[1],b=g[2],h=(0,o.M)({viewerId:N,targetAuthorId:u,targetPostId:c.id,onOptimisticComplete:b}),F=(0,l.useCallback)((function(){y(),t()}),[t]);return l.createElement(l.Fragment,null,d&&l.createElement(k.Ne,{source:{dimension:"negative_signal_modal"},extendSource:!0},l.createElement(C,{post:c,report:F,hide:t})),l.createElement(s.e,{isVisible:f,hide:b,type:"story",alreadyBlocking:!(null==v||!v.isBlocking),onSubmit:h}))}function C(e){var n=e.post,i=e.report,t=e.hide,o=(0,l.useState)(!1),d=(0,a.A)(o,2),r=d[0],m=d[1],s=(0,F.K)(n.id),k=s.undo,p=s.showUndoToast,N=(0,l.useCallback)((function(){r&&(p(v.WN.SHOW_LESS),m(!1)),t()}),[r,t]),S=(0,l.useCallback)((function(){k(),m(!0)}),[k]);return l.createElement(u.a,{hide:N,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can additionally take any of the actions below.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:S},l.createElement(c.a,{display:"flex",justifyContent:"center",marginBottom:"32px"},l.createElement(c.a,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&l.createElement(w,{publisher:n.creator,hide:t}),n.collection&&!n.collection.viewerEdge.isMuting&&l.createElement(w,{publisher:n.collection,hide:t}),l.createElement(h,{onClick:i,isReport:!0,text:"Report story..."}))))}function w(e){var n=e.publisher,i=e.hide,t="User"===n.__typename,a=(0,d.d)({authorId:t?n.id:void 0,collectionId:t?void 0:n.id}),o=a.muteAuthor,r=a.mutePub,m=(0,l.useCallback)((function(){t?o():r(),i()}),[o,r,t]);return l.createElement(h,{onClick:m,text:"Mute ".concat(t?"author":"publication"),detail:n.name})}},34507:(e,n,i)=>{i.d(n,{K:()=>f});var t=i(64467),a=i(5544),l=i(95420),o=i(95964),d=i(96540),r=i(2550),m=i(34317),s=i(49287),c=i(42976),u=i(91830),k=i(97249),v=i(43849),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function S(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function g(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?S(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function f(e,n){var i,t,S=(0,m.$L)(),f=(0,s.Fo)()||{},y=(0,r.A)().viewerId,b=(0,u.zF)(),h=(0,v.$)().animateUndo,F=(0,l.n)(N),E=(0,a.A)(F,1)[0],C=(0,o.IT)(p,{variables:{id:e},fetchPolicy:n}),w=C.data,P=C.loading,A=null==w||null===(i=w.post)||void 0===i||null===(t=i.viewerEdge)||void 0===t?void 0:t.explicitSignalState,I=(0,d.useCallback)((function(n){E({variables:{postId:e,signal:n},update:function(i){y&&i.modify({id:"PostViewerEdge:".concat((0,k.N)(e,y)),fields:{explicitSignalState:function(){return n===c.WN.CLEAR_SIGNAL?null:n}}})}})}),[E,e,y]),_=(0,d.useCallback)((function(n){var i=n.name,t=n.data,a=n.dimension;return S.event(i,g({postId:e,source:a?(0,s.wv)(g(g({},f),{},{dimension:a})):(0,s.wv)(f)},t))}),[e,f]),D=(0,d.useCallback)((function(e){var n=A===c.WN.SHOW_MORE;I(c.WN.CLEAR_SIGNAL),_({name:"post.see_".concat(n?"more":"less",".undo"),dimension:e}),n?x(c.WN.SHOW_MORE):null==h||h()}),[e,A,h]),T=(0,d.useCallback)((function(){I(c.WN.SHOW_LESS),_({name:"post.see_less",data:{mutationSent:!0}})}),[_,I]),x=(0,d.useCallback)((function(e){b({message:"Undone. We won’t recommend ".concat(e===c.WN.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]);return{loading:P,undo:D,showLess:T,explicitSignal:A,showUndoToast:x}}},70521:(e,n,i)=>{i.d(n,{Z:()=>m});var t=i(58168),a=i(80045),l=i(96540),o=i(20036),d=i(24809),r=["isResponsive"],m=function(e){var n=e.isResponsive,i=(0,a.A)(e,r);return l.createElement(o.u,(0,t.A)({text:n?"More":void 0,icon:l.createElement(d.A,null)},i))}},87561:(e,n,i)=>{i.d(n,{G:()=>on});var t=i(58168),a=i(80045),l=i(96540),o=i(5544),d=i(64467),r=i(14792),m=i.n(r),s=i(95964),c=i(94971),u=i(45522),k=i(14782),v=i(86527),p=i(52290),N=i(85050);function S(e){var n=e.onClick,i=e.hidePopover,t=e.showAt,a=e.bookmarkIcon,o=(0,l.useCallback)((function(){i(),n()}),[n,i]);return l.createElement(N.V,{xs:t.xs,sm:t.sm,md:t.md,lg:t.lg,xl:t.xl},l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":"aria-id","aria-expanded":"false",onClick:o},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center",ariaHidden:"true",gap:"12px"},a,"Save"))),l.createElement(k.eS,null))}var g=i(69415),f=i(36557),y=i(61333),b={width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"};function h(e){var n=e.hidePopover,i=(0,g.y)(),t=i.areHighlightsHidden,a=i.toggleHideHighlights,d=(0,l.useState)(),r=(0,o.A)(d,2),m=r[0],s=r[1],c=(0,l.useCallback)((function(){a(),n()}),[n,a]);return(0,l.useEffect)((function(){s(navigator.userAgent)}),[]),l.createElement(k.q3,{paddingTopBottom:"6px"},l.createElement(v.N,{onClick:c,rules:b},l.createElement("span",null,t?"Show":"Hide"," highlights"),!(0,y.Gz)(m)&&l.createElement(p.a,{padding:"2px 6px",borderRadius:"4px",border:"neutral.tertiary"},l.createElement(f.kZ,{scale:"XS"},(0,y.cX)(m)?"⌘":"Ctrl"," /"))))}var F=i(70521),E=i(17745),C=i(27721),w=i(1722),P=i(56743),A=i(75599),I=i(39160),_=i(51771),D=function(e){var n=e.post,i=e.hidePopover,t=e.showHideHighlights,a=(0,C.R)().value,o=null==a?void 0:a.id,d=(0,w.h)(n).viewerEdge,r=(0,A.w)(),m=(0,I.Dy)((function(e){return e.multiVote.clapsPerPost})),s=(0,_.F)(m,n,d),c=s.clapCount,u=s.viewerClapCount,p=(0,E.f)(),N=o&&c&&u&&u>0;return N||t?l.createElement(l.Fragment,null,!!N&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){p(n,(null==a?void 0:a.id)||"",-u,d),r((0,P.dy)({postId:n.id})),i()}},"Undo claps")),l.createElement(k.eS,null)):null},T=i(23496),x=i(44929),O=i(49534),V=i(58285),R=i(9942),M=i(4369),L=i(5249),B=i(71468),U=i(91830),H={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},j=(0,B.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:H,onCompleted:function(){i((0,U.MZ)({message:"Responses are now hidden for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!1}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),W=(0,B.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(L.s,{mutation:H,onCompleted:function(){i((0,U.MZ)({message:"Responses are now shown for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!0}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),z=i(22036),Z=i(60603),q=function(e){var n=e.hidePopover,i=e.postId,t=e.allowResponses,a=(0,Z.e)(!1),d=(0,o.A)(a,3),r=d[0],m=d[1],s=d[2],c=function(){s(),n()};return l.createElement(l.Fragment,null,l.createElement(j,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(z.n,{onConfirm:n,isVisible:r,hide:c,entityTypename:"Post"})})),l.createElement(W,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){t?m():n()}},t?"Hide responses":"Show responses"))})))},G=i(15795),K=i(28899),$={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]},J=i(95420),Q=i(42976),X={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},Y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},ee=function(e){var n=(0,J.n)(X),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Q.d6.APPROVED}})}),[e])},ne=function(e){var n=(0,J.n)(Y),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Q.d6.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},ie=i(75636),te=i(3005),ae=i(99731),le=i(24960),oe=i(53908),de=i(56942),re=i(27622),me=i(66305),se=i(51260),ce="collectionSubmissionPopover",ue=[{name:"",value:"No publication",content:l.createElement(p.a,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},l.createElement(f.kZ,{scale:"M",color:"DARKER"},"No publication"))}];function ke(e){var n=e.collection;return n.name?l.createElement(p.a,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},l.createElement(f.kZ,{scale:"M",color:"DARKER"},n.name),l.createElement(K.u,{collection:n,size:32})):null}function ve(e){var n=e.show,i=e.post,t=i.statusForCollection,a=i.isPublished,d=l.useState(!1),r=(0,o.A)(d,2),m=r[0],s=r[1],c=(0,ie.z)({name:"enable_submissions_v2",placeholder:!1}),u=(0,se.Nw)("ShowPostSubmission",{postId:i.id}),p=(0,G.G)();return m||me.R5.on("load",(function(){return s(!0)})),"PENDING"!==t&&"APPROVED"!==t&&a&&m?l.createElement(Ne,{post:i,noQueryReturn:null},(function(e){var t=e.loading,a=e.error,o=e.data;if(t||a)return null;var d=(void 0===o?{viewer:void 0}:o).viewer,r=i.creator;if(!d||!r||d.id!==r.id)return null;var m=d.adminCollections,s=d.writerCollections;return 0===m.length&&0===s.length?null:l.createElement(k.q3,null,c?l.createElement(v.N,{onClick:function(){return p("submission.started",{postId:i.id})},href:u},"Submit to publication"):l.createElement(v.N,{"aria-controls":ce,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function pe(e){var n=e.isVisible,i=e.hide;return l.createElement(te.l,{isVisible:n,hide:i,withCloseButton:!0},l.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},l.createElement(de.DZ,{scale:"M",tag:"h3"},"Story submitted"),l.createElement(p.a,{paddingTop:"8px",paddingBottom:"24px"},l.createElement(re.Pd,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),l.createElement(ae.$n,{buttonStyle:"OBVIOUS",onClick:i},"OK")))}var Ne=function(e){var n=e.children,i=e.post,t=e.noQueryReturn,a=i.creator,o=(0,C.R)().value,d=!o||o.id!==(null==a?void 0:a.id)||!a,r=(0,s.IT)($,{ssr:!1,skip:d}),m=r.data,c=r.loading,u=r.error;return d?t:l.createElement(l.Fragment,null,n({loading:c,error:u,data:m}))},Se=function(e){var n=e.post,i=e.hide,t=e.isVisible,a=e.children,d=l.useState(!1),r=(0,o.A)(d,2),m=r[0],s=r[1],c=l.useState(""),u=(0,o.A)(c,2),k=u[0],N=u[1],S=(0,Z.e)(!1),g=(0,o.A)(S,3),y=g[0],b=g[1],h=g[2],F=ee(n),E=function(e){var n=(0,J.n)(X),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:Q.d6.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:Q.d6.PENDING,pendingCollection:n}}})}),[e])}(n);return m||me.R5.on("load",(function(){return s(!0)})),n.isPublished&&m?l.createElement(l.Fragment,null,l.createElement(pe,{hide:h,isVisible:y}),l.createElement(Ne,{post:n,noQueryReturn:a},(function(e){var o=e.loading,d=e.error,r=e.data,m=void 0===r?{viewer:void 0}:r;if(o||d)return l.createElement(l.Fragment,null,a);var s=m.viewer,c=n.creator;if(!s||!c||s.id!==c.id)return l.createElement(l.Fragment,null,a);var u=s.adminCollections,S=s.writerCollections;if(0===u.length&&0===S.length)return l.createElement(l.Fragment,null,a);var g=u.concat(S).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:l.createElement(ke,{collection:e})}})),y=ue.concat(g),h=u.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),C=S.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w="";if(k){var P=y.find((function(e){return e.name===k}));P&&(w=P.value)}var A="addStoryToPublicationTitle";return l.createElement(le.A,{ariaId:ce,hide:i,isVisible:t,popoverRenderFn:function(){return l.createElement(p.a,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},l.createElement(f.kZ,{scale:"M",color:"DARKER",labelledById:A},"Add your story to a publication:"),l.createElement(p.a,{marginTop:"10px",position:"relative"},l.createElement(p.a,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),l.createElement(p.a,{maxHeight:"160px",overflow:"auto"},l.createElement(oe.z,{value:w,onChange:N,options:y,radioButtonsName:"addStory","aria-labelledby":A}))),l.createElement(p.a,{display:"flex",marginTop:"20px"},k in h?l.createElement(ae.$n,{onClick:function(){var e=h[k];i(),F(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):l.createElement(ae.$n,{onClick:function(){var e=C[k];E(e),i(),b()},disabled:!k},"Submit"),l.createElement(p.a,{marginLeft:"10px"},l.createElement(f.kZ,{scale:"M",color:"LIGHTER"},l.createElement(v.N,{onClick:i},l.createElement(p.a,{padding:"10px"},"Cancel"))))),l.createElement(p.a,{marginTop:"10px"},l.createElement(f.kZ,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},a)}))):l.createElement(l.Fragment,null,a)},ge=function(e){var n=e.children,i=e.isVisible,t=e.post,a=e.hide,o=ee(t),d=ne(t),r=(0,A.w)(),m=t.pendingCollection;return m?l.createElement(le.A,{ariaId:"manageSubmissionPopover",isVisible:i,hide:a,popoverRenderFn:function(){return l.createElement(p.a,{padding:"16px",maxWidth:"280px"},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(K.u,{collection:m,size:40})),l.createElement(f.kZ,{scale:"S"},"This draft is submitted to ",m.name,".")),l.createElement(p.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(ae.$n,{buttonStyle:"OBVIOUS",onClick:function(){a(),o(t.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),l.createElement(ae.$n,{buttonStyle:"SUBTLE",onClick:function(){d(t.pendingCollection).then((function(){r((0,U.MZ)({message:"Story removed from ".concat(m.name||"publication")}))})),a()}},"Don't accept")))}},n):l.createElement(l.Fragment,null,n)},fe=i(3737),ye=i(86329),be="removeFromPublicationPopover",he=function(e){var n,i,t=e.viewer,a=e.show,o=e.post,d=(0,ye.J)((null===(n=o.pendingCollection)||void 0===n?void 0:n.id)||(null===(i=o.collection)||void 0===i?void 0:i.id)).viewerEdge,r=null==d?void 0:d.isEditor;return t&&("APPROVED"===o.statusForCollection&&(r||(0,fe.X)(o,t)||(0,fe.k)(o,t))||"PENDING"===o.statusForCollection&&(0,fe.k)(o,t))?l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":be,"aria-expanded":"false",onClick:a},"Remove story from publication")):null},Fe=function(e){var n=e.children,i=e.isVisible,t=e.hide,a=e.post,o=e.viewer,d=(0,A.w)(),r=ne(a),m=a.collection||a.pendingCollection;return m?l.createElement(le.A,{ariaId:be,isVisible:i,hide:t,popoverRenderFn:function(){return l.createElement(p.a,{padding:"16px",maxWidth:"280px"},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(K.u,{collection:m,size:40})),"APPROVED"===a.statusForCollection?l.createElement(f.kZ,{scale:"S"},(0,fe.k)(a,o)?"Your":"This"," story is published in"," ",m.name,"."):"PENDING"===a.statusForCollection?l.createElement(f.kZ,{scale:"S"},"Your story is being reviewed by ",m.name," editors."):l.createElement(f.kZ,{scale:"S"},"This draft is submitted to ",m.name)),l.createElement(p.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(ae.$n,{buttonStyle:"SUBTLE",onClick:function(){r(m).then((function(){d((0,U.MZ)({message:"Story removed from ".concat(m.name||"publication")}))}),(function(){d((0,U.MZ)({message:"There was a problem removing the story from ".concat(m.name||"publication"),toastStyle:"ERROR"}))})),t()}},"PENDING"===a.statusForCollection?"Cancel submission":"Remove from ".concat(m.name||"")))))}},n):l.createElement(l.Fragment,null,n)},Ee=i(38714),Ce=i(89142),we=i(32038),Pe=i(19723),Ae=i(43634),Ie=i(59348),_e=i(88308),De=i(21335),Te=i(71984),xe=i(17045),Oe=function(e){var n=e.hidePopover,i=e.targetUserId,t=e.postId,a=e.viewerId,d=(0,De.cd)(i).viewerEdge,r=!(null==d||!d.isBlocking),m=(0,Z.e)(!1),s=(0,o.A)(m,3),c=s[0],u=s[1],p=s[2],N=(0,l.useCallback)((function(){p(),n()}),[n,p]),S=(0,xe.M)({viewerId:a,targetAuthorId:i,targetPostId:t,onOptimisticComplete:N});return l.createElement(l.Fragment,null,l.createElement(Te.e,{onSubmit:S,isVisible:c,hide:N,type:"story",alreadyBlocking:r}),l.createElement(k.q3,null,l.createElement(v.N,{onClick:u,color:"RED"},"Report story...")))},Ve=i(46445),Re=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(){for(var e=0,i=n;e<i.length;e++)(0,i[e])()}},Me=i(46879),Le={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"auroraHooks_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AddToCatalogBase_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useFeatureStoryInPub_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"verifications"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBookAuthor"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PostPreview_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"isUserVerifiedBookAuthor_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryModal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WithdrawOrRemoveActionsFragment_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WithdrawOrRemoveSubmissionFragment_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithdrawOrRemoveActionsFragment_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithdrawOrRemoveSubmissionFragment_post"}}]}}]},Be=i(96967);function Ue(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function He(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ue(Object(i),!0).forEach((function(n){(0,d.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ue(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var je,We=function(e){var n=(0,s.IT)(Le,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var i=He(He({},e),{},{post:n.post});return l.createElement(ze,i)},ze=function(e){var n,i,a,d=e.post,r=e.hideUndoApplause,s=void 0!==r&&r,N=e.isResponsive,g=e.popoverPositioningStrategy,f=e.hideOnScroll,y=e.testId,b=e.prependMenuItems,E=e.rules,w=e.showAddToList,P=e.showHideHighlights,A=e.onButtonClick,_=d.creator,L=d.collection,B=(0,l.useState)(!1),H=(0,o.A)(B,2),j=H[0],W=H[1],z=(0,l.useState)(!1),G=(0,o.A)(z,2),K=G[0],$=G[1],J=(0,l.useState)(!1),X=(0,o.A)(J,2),Y=X[0],ee=X[1],ne=d.allowResponses,te=(0,ye.J)(null==L?void 0:L.id).viewerEdge,ae=(0,U.zF)(),oe=(0,C.R)().value,de=null==oe?void 0:oe.id,re=d.responseDistribution===Q.IZ.DISTRIBUTED,me=!!d.inResponseToPostResult||!!d.inResponseToCatalogResult,ce=me?"response":"story",ue=(0,Ce.L)(d),ke=(0,o.A)(ue,2),pe=ke[0],Ne=ke[1],fe=(0,Ee.M)(d.collection),be=(0,Ee.M)(d.creator),De=(0,l.useCallback)((function(e){var n,i,t;ae({extraParams:{collectionName:(null===(n=d.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(i=e.data)||void 0===i||null===(t=i.setPinnedAt)||void 0===t||!t.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=d.collection)||void 0===n?void 0:n.name]),Te=(0,l.useCallback)((function(e,n){var i;"MutationSuccess"===(null===(i=e.data)||void 0===i?void 0:i.setPostPinnedOnCreatorProfile.__typename)&&ae({message:"This ".concat(ce,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),xe=(0,l.useCallback)((function(){Ne().then(De)}),[Ne,De,null==d||null===(i=d.collection)||void 0===i?void 0:i.name]),Le=(0,Ce.m)(d),Ue=(0,o.A)(Le,2),He=Ue[0],je=Ue[1],We=(0,l.useCallback)((function(){je().then((function(e){return Te(e,He)}))}),[je,Te]),ze=(0,I.d4)((function(e){return e.config.authDomain})),Ze=(0,l.useState)(!1),qe=(0,o.A)(Ze,2),Ge=qe[0],Ke=qe[1],$e=(0,Z.e)(!1),Je=(0,o.A)($e,3),Qe=Je[0],Xe=Je[1],Ye=Je[2],en=(0,Z.e)(!1),nn=(0,o.A)(en,4),tn=nn[0],an=nn[2],ln=nn[3],on=(0,O.Q)(d.id),dn=(0,o.A)(on,1)[0],rn=(0,Z.e)(!1),mn=(0,o.A)(rn,3),sn=mn[0],cn=mn[1],un=mn[2],kn=(0,l.useCallback)((function(){j?W(!1):K?$(!1):ln(),null==A||A()}),[j,K,ln,A]),vn=(0,se.Nw)("ShowHome",{}),pn=(0,l.useCallback)((function(){dn().then((function(){window.location.href=vn}))}),[dn,vn]),Nn="Delete story";re?Nn="Delete story and response":me&&(Nn="Delete response");var Sn=re?we.e:l.createElement(c.C,{entityName:ce}),gn=(0,Pe._P)("can_edit_members_only_posts"),fn=(0,ie.z)({name:"enable_submissions_v2",placeholder:!1});if(!_||!oe)return null;var yn=de===_.id,bn=null==te?void 0:te.isEditor,hn=yn||bn,Fn=gn&&d&&d.isLocked,En=hn||Fn,Cn="creatorActionOverflowMenu",wn=bn&&!yn,Pn=!me||re,An=L&&bn&&d.isPublished,In=null==d?void 0:d.publicationsFeaturingPost.map((function(e){return e.id})),_n=null!==(a=L&&In.includes(L.id))&&void 0!==a&&a,Dn=function(){return{maxWidth:"280px"}},Tn=function(){re&&(an(),Xe())};if(Ge)return l.createElement(R.r,{to:(0,Me.ycK)(ze,d.id)});var xn={kind:Q.Bd.POST,target:d};return l.createElement(l.Fragment,null,l.createElement(Ve.T,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Qe,onConfirm:function(){Ke(!0)},hide:Ye,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},we.T),l.createElement(Ve.T,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:sn,onConfirm:pn,hide:un,titleText:Nn,confirmText:"Delete",isDestructiveAction:!0,testId:"deleteStoryModal"},Sn),l.createElement(T.f,(0,t.A)({},xn,{viewer:oe}),(function(e){var n=e.onClick,i=e.bookmarkIcon;return l.createElement(le.A,{popoverRules:Dn,targetDistance:10,ariaId:Cn,isVisible:tn,hide:an,positioningStrategy:g,hideOnScroll:f,popoverRenderFn:function(){return l.createElement(k.Ni,null,b&&l.createElement(l.Fragment,null,b(an)),w&&l.createElement(S,{showAt:w,onClick:n,hidePopover:an,bookmarkIcon:i}),l.createElement(l.Fragment,null,l.createElement(x.D,{type:"popover",handleClick:Tn,href:(0,Me.ycK)(ze,d.id),isVisible:!!En},"Edit ",ce),An&&l.createElement(u.k,{post:d,hidePopover:an,isFeaturedInCurrentPublication:_n,showCollectionName:!0,showNewLabelOrTokenCount:!0}),L&&bn&&fe&&Pn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:xe,rules:{textAlign:"left"}},pe?"Unpin this ".concat(ce," from "):"Pin this ".concat(ce," to "),L.name)),yn&&be&&Pn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:We},He?"Unpin this ".concat(ce," from your profile"):"Pin this ".concat(ce," to your profile"))),l.createElement(M.z,{post:d,onClick:an,menuStyle:"TEXT"}),l.createElement(k.eS,null),l.createElement(k.q3,null,l.createElement(v.N,{href:(0,Me.vEY)(ze,d.id)},m()(ce)," settings")),l.createElement(k.q3,null,l.createElement(v.N,{href:(0,Me.doj)(ze,d.id)},m()(ce)," stats")),l.createElement(k.eS,null),P&&l.createElement(h,{hidePopover:an}),l.createElement(q,{hidePopover:an,postId:d.id,allowResponses:ne}),l.createElement(ve,{post:d,show:function(){$(!0),an()}}),fn?l.createElement(Be.m,{post:d,postActionCallback:an}):l.createElement(he,{viewer:oe,post:d,show:function(){ee(!0),an()}}),yn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:Re(an,cn),color:"RED"},"Delete ",ce)),wn?l.createElement(l.Fragment,null,l.createElement(k.eS,null),!s&&l.createElement(D,{post:d,hidePopover:an}),l.createElement(l.Fragment,null,de?l.createElement(Oe,{targetUserId:_.id,postId:d.id,hidePopover:an,viewerId:de}):l.createElement(k.q3,null,l.createElement(Ae.r,{operation:"register",post:d,susiEntry:"report_footer"},"Report this ",ce))),l.createElement(V.J,{hidePopover:an,creator:_,collection:L,postId:d.id}),l.createElement(Ie.U,{hidePopover:an,creator:_,viewer:oe}),l.createElement(_e.U,{hidePopover:an,creator:_,viewer:oe})):null))}},l.createElement(Se,{post:d,isVisible:K,hide:function(){$(!1)}},l.createElement(Fe,{viewer:oe,post:d,isVisible:Y,hide:function(){ee(!1)}},l.createElement(ge,{post:d,isVisible:j,hide:function(){W(!1)}},l.createElement(p.a,{flexGrow:"0",marginRight:"-4px"},l.createElement(F.Z,{ariaControls:Cn,ariaExpanded:tn?"true":"false",ariaLabel:"More options",onClick:function(){return kn()},isResponsive:N,tooltipText:"More",testId:y,rules:E}))))))})))},Ze=i(49470);function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},qe.apply(null,arguments)}const Ge=function(e){return l.createElement("svg",qe({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),je||(je=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})))};var Ke=i(43849),$e=i(8963),Je=i(34507),Qe={pointerEvents:"none"};function Xe(e){var n=e.hidePopover,i=e.post,t=(0,Z.e)(!1),a=(0,o.A)(t,3),d=a[0],r=a[1],m=a[2],s=(0,Je.K)(i.id),c=s.loading,u=s.showLess,N=s.explicitSignal,S=s.undo,g=s.showUndoToast,f=(0,Ke.$)(),y=f.animateShowLess,b=f.animateUndo,h=N===Q.WN.SHOW_LESS,F=(0,l.useCallback)((function(){h?(S(),g(Q.WN.SHOW_LESS),n(),null==b||b()):(u(),y?(n(),y()):r())}),[u,n,h,S,g,y,b]),E=(0,l.useCallback)((function(){n(),m()}),[n,m]);return l.createElement(l.Fragment,null,l.createElement(k.q3,{loading:c},l.createElement(v.N,{onClick:F,disabled:c,rules:c?Qe:void 0},l.createElement(p.a,{display:"flex"},l.createElement(p.a,{marginRight:"12px",flexShrink:"0"},h?l.createElement(Ge,null):l.createElement(Ze.A,null)),l.createElement(p.a,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},h?"Undo show":"Show"," less like this")))),l.createElement(k.eS,null),l.createElement($e.b,{isVisible:d,hide:E,post:i}))}var Ye=i(20822),en=i(49287),nn=i(52705);function tn(e){var n=e.author,i=e.collection,t=e.hidePopover,a=(0,ye.J)(null==i?void 0:i.id).viewerEdge,o=(null==n?void 0:n.id)||"",d=(null==i?void 0:i.id)||"",r=null==a?void 0:a.isFollowing,m=(0,Ye.H)({collectionId:d,collectionName:null==i?void 0:i.name}),s=m.followCollection,c=m.unfollowCollection,u=(0,en.jI)(),p=(0,C.R)().value,N=p&&o===p.id,S=(0,l.useCallback)((function(){r?c():s(),null==t||t()}),[d,r,s,t,u,c]);return p?l.createElement(l.Fragment,null,!!n&&!N&&l.createElement(k.q3,null,l.createElement(nn.N,{scale:"S",susiEntry:"follow_post_preview_menu",user:n,isInline:!0,preventParentClick:!0,showSubscribeDialog:!0})),!!i&&!(null!=a&&a.isEditor)&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:S},r?"Unfollow":"Follow"," publication"))):null}function an(e){var n=e.post,i=e.isResponsive,a=e.popoverPositioningStrategy,d=e.viewer,r=e.hideOnScroll,m=e.testId,s=e.prependMenuItems,c=e.rules,u=e.showAddToList,v=e.showHideHighlights,p=e.onButtonClick,N=n.id,g=n.creator,f=n.collection,y=(0,Z.e)(!1),b=(0,o.A)(y,4),E=b[0],C=b[2],w=b[3],P=(0,l.useCallback)((function(){null==p||p(),w()}),[w,p]),A={kind:Q.Bd.POST,target:n},I=(0,l.useCallback)((function(e,i){return l.createElement(k.Ni,{width:"248px"},s&&l.createElement(l.Fragment,null,s(C)),u&&l.createElement(S,{showAt:u,onClick:e,hidePopover:C,bookmarkIcon:i}),l.createElement(Xe,{hidePopover:C,post:n}),v&&l.createElement(h,{hidePopover:C}),l.createElement(D,{post:n,hidePopover:C,showHideHighlights:v}),l.createElement(tn,{author:g,collection:f,hidePopover:C}),l.createElement(k.eS,null),l.createElement(V.J,{creator:g,collection:f,hidePopover:C,postId:N}),l.createElement(Oe,{postId:N,viewerId:null==d?void 0:d.id,targetUserId:(null==g?void 0:g.id)||"",hidePopover:C}))}),[s,u]);return null!=g&&g.id?l.createElement(T.f,(0,t.A)({},A,{viewer:d}),(function(e){var n=e.onClick,t=e.bookmarkIcon;return l.createElement(le.A,{isVisible:E,positioningStrategy:a,targetDistance:10,hide:C,popoverRenderFn:function(){return I(n,t)},hideOnScroll:r},l.createElement(F.Z,{onClick:P,ariaLabel:"More options",isResponsive:i,tooltipText:"More",testId:m,rules:c}))})):null}var ln=["showAddToList"];function on(e){var n=e.showAddToList,i=(0,a.A)(e,ln),o=i.post,d=o.creator,r=o.collection,m=o.visibility,s=(0,C.R)(),c=s.loading,u=s.value,k=(0,ye.J)(null==r?void 0:r.id).viewerEdge,v=!c&&!!u,p=!(null==k||!k.isEditor),N=(null==u?void 0:u.id)===(null==d?void 0:d.id),S=m===Q.dL.UNLISTED?void 0:n;return d&&v?p||N?l.createElement(We,(0,t.A)({showAddToList:S},i)):l.createElement(an,(0,t.A)({viewer:u,showAddToList:S},i)):null}},44929:(e,n,i)=>{i.d(n,{D:()=>v});var t=i(58168),a=i(80045),l=i(96540),o=i(14782),d=i(86527),r=i(99731),m=i(51260),s=i(65550),c=["size","href","children","handleClick","buttonStyle","type","isVisible"],u=["href","children","handleClick"],k=["handleClick","isVisible","children","href"],v=function(e){var n=e.size,i=e.href,o=e.children,d=e.handleClick,r=e.buttonStyle,u=e.type,k=e.isVisible,v=void 0===k||k,g=(0,a.A)(e,c),f=!(0,s.L)(),y=(0,m.IF)(),b=(0,m.au)(),h=(0,l.useCallback)((function(e){null==d||d(e)}),[d]);if(!v)return null;var F=y(new URL(i).pathname),E=null==F?void 0:F.params.postId,C=i;switch(f||(C=E?b("ShowMobileWebEditorRedirectEditStory",{postId:E}):b("ShowMobileWebEditorRedirectNewStory",{})),u){case"link":return l.createElement(p,(0,t.A)({href:C,handleClick:h},g),o);case"button":return l.createElement(S,{buttonStyle:r,size:n,href:C,handleClick:h},o);case"popover":return l.createElement(N,(0,t.A)({isVisible:v,href:C,handleClick:h},g),o)}},p=function(e){var n=e.href,i=e.children,o=e.handleClick,r=(0,a.A)(e,u);return l.createElement(d.N,(0,t.A)({href:n,onClick:o},r),i)},N=function(e){var n=e.handleClick,i=e.isVisible,d=void 0===i||i,r=e.children,m=e.href,s=(0,a.A)(e,k);return d?l.createElement(o.q3,null,l.createElement(p,(0,t.A)({href:m,handleClick:n},s),r)):null},S=function(e){var n=e.href,i=e.size,t=e.buttonStyle,a=e.children,o=e.handleClick;return l.createElement(r.$n,{buttonStyle:t,size:i,href:n,onClick:o},a)}},83573:(e,n,i)=>{i.d(n,{s:()=>t});var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},17045:(e,n,i)=>{i.d(n,{M:()=>m});var t=i(5544),a=i(95420),l=i(96540),o=i(34317),d=i(91830),r=i(83573);function m(e){var n=e.viewerId,i=e.targetAuthorId,m=e.targetPostId,s=e.onOptimisticComplete,c=(0,d.zF)(),u=(0,o.$L)(),k=(0,a.n)(r.s),v=(0,t.A)(k,1)[0];return(0,l.useCallback)((function(e,t){v({variables:{targetAuthorId:i,targetPostId:m,alsoBlockAuthor:e,reason:t},onCompleted:function(){c({message:"Successfully reported post."}),u.event("post.flagged",{postId:m,reason:t})},onError:function(){c({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:i,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(i,"-viewerId:").concat(n),isBlocking:e}}}}),null==s||s()}),[v,n,i,m,s])}},69415:(e,n,i)=>{i.d(n,{g:()=>k,y:()=>v});var t=i(5544),a=i(57746),l=i(96540),o=i(34317),d=i(49287),r=i(91830),m=i(66973),s=(0,l.createContext)({areHighlightsHidden:!1,toggleHideHighlights:function(){return null}}),c=new m.A("post-view-settings"),u="hide-highlights";function k(e){var n=e.postId,i=e.children,m=(0,l.useState)(!!c.get(u)),k=(0,t.A)(m,2),v=k[0],p=k[1],N=(0,r.zF)(),S=(0,o.$L)(),g=(0,d.jI)(),f=(0,l.useCallback)((function(e){c.set(u,e),p(e),S.event("displaySettings.highlights_from_others",{showHighlights:!e,postId:n,source:g})}),[n,g]),y=(0,l.useCallback)((function(){f(!v),N({message:"Highlights from others are ".concat(v?"visible":"hidden"," for you"),toastStyle:"MESSAGE",extraParams:{onClickUndo:function(){return f(v)},hideCloseButton:!0}})}),[v]),b=(0,l.useMemo)((function(){return{areHighlightsHidden:v,toggleHideHighlights:y}}),[v,y]);return(0,l.useEffect)((function(){var e=function(e){(0,a.Ay)("mod+/",e)&&y()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[y]),l.createElement(s.Provider,{value:b},i)}var v=function(){return(0,l.useContext)(s)}},38714:(e,n,i)=>{i.d(n,{M:()=>t});var t=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)}},89142:(e,n,i)=>{i.d(n,{L:()=>r,m:()=>m});var t=i(5544),a=i(95420),l=i(96540),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},r=function(e){var n=e.id,i=e.collection,d=e.pendingCollection,r=e.pinnedAt,m=(i||d||{id:""}).id,s=(0,a.n)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:i,pendingCollection:d,pinnedAt:r?0:Date.now()}}}),c=(0,t.A)(s,1)[0],u=l.useCallback((function(){return c({variables:{postId:n,collectionId:m,pinnedAt:!r}})}),[n,m,r,c]);return[r,u]},m=function(e){var n=e.id,i=e.pinnedByCreatorAt,o=(0,a.n)(d,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,t){var a;"MutationSuccess"===(null===(a=t.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return i?0:Date.now()}}})}}),r=(0,t.A)(o,1)[0],m=l.useCallback((function(){return r({variables:{postId:n,isPinned:!i}})}),[n,r,i]);return[i,m]}},32038:(e,n,i)=>{i.d(n,{T:()=>a,e:()=>t});var t="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},55981:(e,n,i)=>{i.d(n,{n:()=>d});var t=i(96540),a=i(44402),l=i(1417),o=function(e){return{"& path":{fill:e.colorTokens.foreground.error.primary.base}}},d=function(){var e=(0,a.l)();return t.createElement(l.A,{className:e(o)})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7561.fc7962fc.chunk.js.map