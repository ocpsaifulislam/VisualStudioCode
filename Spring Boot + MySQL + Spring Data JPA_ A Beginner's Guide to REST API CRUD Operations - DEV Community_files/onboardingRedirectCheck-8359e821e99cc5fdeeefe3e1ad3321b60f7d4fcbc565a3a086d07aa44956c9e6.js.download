(()=>{function n(){let n=document.querySelector("meta[name='csrf-token']");return null!==n?n.content:void 0}function e(){return new Promise(((n,e)=>{d({resolve:n,reject:e})()}))}function o(){return!["/onboarding","/signout_confirm","/privacy","/admin/creator_settings/new"].includes(window.location.pathname)}function r(){return o()&&!["/code-of-conduct","/terms"].includes(window.location.pathname)}function t(n){return n.saw_onboarding&&n.checked_code_of_conduct&&n.checked_terms_and_conditions}function i(n){return"true"===document.body.dataset.creator&&!n.saw_onboarding}function c(){var n;let e=null==(n=localStorage.getItem("shouldRedirectToOnboarding"))||n;return JSON.parse(e)}var d=({resolve:e,reject:o,safe:r=!1,waitTime:t=20})=>{let i=0;return function c(){if(3e3===i)return r?void e({user:a,csrfToken:d}):void o(new Error("Couldn't find user data on page."));let d=n(document),{user:a}=document.body.dataset;if(a&&void 0!==d){let n=JSON.parse(a);e({currentUser:n,csrfToken:d})}else i+=t,setTimeout(c,t)}};HTMLDocument.prototype.ready=new Promise((n=>"loading"!==document.readyState?n():(document.addEventListener("DOMContentLoaded",(()=>n())),null))),document.ready.then(e().then((({currentUser:n,csrfToken:e})=>{window.currentUser=n,window.csrfToken=e,i(n)?r()&&(window.location=`${window.location.origin}/admin/creator_settings/new?referrer=${window.location}`):o()&&!t(n)&&(window.location=`${window.location.origin}/onboarding?referrer=${window.location}`)})).catch((n=>{console.error("Error getting user and CSRF Token",n)}))),window.InstantClick.on("change",(()=>{e().then((({currentUser:n})=>{r()&&c()&&i(n)?window.location=`${window.location.origin}/admin/creator_settings/new?referrer=${window.location}`:o()&&c()&&!t(n)&&(window.location=`${window.location.origin}/onboarding?referrer=${window.location}`)})).catch((n=>{console.error("Error getting user and CSRF Token",n)}))}))})();