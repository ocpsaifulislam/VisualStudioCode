(()=>{function t(){window.scrollTo(0,R)}function e(){R=window.scrollY}function n(t){"Escape"==t.key&&l(t)}function r(t){t?document.body.addEventListener("keyup",n):document.body.removeEventListener("keyup",n)}function o(){l()}function i(t){t?window.addEventListener("popstate",o):window.removeEventListener("popstate",o)}function a(t){q.style.overflow=t?"hidden":""}function s(t){if(t)for(let e of t)e.addEventListener("click",l)}function u(t){if(t)for(let e of t)e.removeEventListener("click",l)}function l(n){let o=document.getElementsByClassName("js-fullscreen-code")[0],l=null!=n&&n.currentTarget.closest(".js-code-highlight")?n.currentTarget.closest(".js-code-highlight").cloneNode(!0):null,c=l?l.getElementsByClassName("js-fullscreen-code-action"):null;F?(a(!1),t(),r(!1),i(!1),u(c),o.classList.remove("is-open"),o.removeChild(o.childNodes[0]),F=!1):(a(!0),e(),r(!0),i(!0),l.classList.add("is-fullscreen"),o.appendChild(l),o.classList.add("is-open"),s(c),F=!0)}function c(){let t=document.querySelectorAll("button[id^=sponsorship-dropdown-trigger-]");t.length&&t.forEach((t=>{d(t);let e=t.getAttribute("aria-controls");t&&"true"!==t.dataset.initialized&&($({triggerElementId:t.id,dropdownContentId:e}),t.dataset.initialized="true");let n=t.closest(".popover-billboard");n&&t.getBoundingClientRect().top>window.innerHeight/2&&n.classList.add("popover-billboard--menuopenupwards")})),p();let e=document.querySelectorAll("button[id^=sponsorship-close-trigger-]");e.length&&e.forEach((t=>{t.addEventListener("click",(()=>{f(t)})),t.closest(".popover-billboard")&&document.addEventListener("click",(e=>{e.target.closest(".crayons-article__header")&&"none"!==document.querySelector(".popover-billboard").style.display&&e.preventDefault(),e.target.closest(".js-billboard")||f(t)}))}))}function d(t){t.closest(".js-billboard").clientHeight<220&&(t.closest(".js-billboard").style.overflowY="revert")}function f(t){let e=t.closest(".js-billboard").dataset.dismissalSku;if(t.closest(".js-billboard").style.display="none",localStorage&&e&&e.length>0){let t=JSON.parse(localStorage.getItem("dismissal_skus_triggered"))||[];t.includes(e)||(t.push(e),localStorage.setItem("dismissal_skus_triggered",JSON.stringify(t)))}}function p(){let t=document.body.dataset.user;if(t)try{JSON.parse(t).admin&&document.querySelectorAll(".js-admin-billboard-link").forEach((t=>{t.classList.remove("hidden")}))}catch(t){console.warn("Error parsing user data for admin billboard links:",t)}}async function h(){if(S)return S;let{default:t}=await Promise.resolve().then((()=>B(P())));return S=t}function y(t){let e=[];for(let n of t)1===n.nodeType&&(n.classList.contains("ltag_gist-liquid-tag")&&e.push(n),e.push(...n.querySelectorAll(".ltag_gist-liquid-tag")));return e}function m(t,e){for(let n of e){let e=n.firstElementChild;t(n,e.outerHTML,{beforeWrite:t=>n.childElementCount>3?"":t}),e.remove()}}function g(t,e){let n={attributes:!1,childList:!0,subtree:!0},r=new MutationObserver((function(t){for(let{type:n,addedNodes:r}of t)"childList"===n&&r.length>0&&m(e,y(r))}));r.observe(t,n),InstantClick.on("change",(()=>{r.disconnect()})),window.addEventListener("beforeunload",(()=>{r.disconnect()}))}async function v(t){let e=await h();m(e,document.querySelectorAll(".ltag_gist-liquid-tag")),g(t,e)}function b(){let t=document.querySelectorAll("a[href]"),e=window.location.hostname;t.forEach((t=>{let n=t.getAttribute("href");if(n&&(n.startsWith("http://")||n.startsWith("https://"))&&!n.includes(e)){t.setAttribute("target","_blank");let e=t.getAttribute("rel"),n=["noopener","noreferrer"];if(e){let r=e.split(" "),o=[...new Set([...r,...n])].join(" ");t.setAttribute("rel",o)}else t.setAttribute("rel",n.join(" "))}}))}function w(){document.getElementById("article-copy-link-announcer").hidden=!0}function T(){document.getElementById("article-copy-link-announcer").hidden=!1}function _(){if("#comments"===location.hash){let t=document.getElementById("text-area"),e=new FocusEvent("focus");t.dispatchEvent(e)}}function E(){let t=document.getElementById("aync-bottom-content"),e=document.getElementById("article-show-container"),n=document.getElementById("comments"),r=new IntersectionObserver((o=>{o.forEach((o=>{o.isIntersecting&&(window.fetch(`/bottom_items?article_id=${e.dataset.articleId}`).then((e=>{e.text().then((e=>{t.innerHTML=e}))})),r.unobserve(n))}))}));r.observe(n)}function k(){let t=document.getElementById("copy-post-url-button").getAttribute("data-postUrl");U(t).then((()=>{T()}))}var S,x=Object.create,I=Object.defineProperty,A=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyNames,N=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),L=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of C(e))!O.call(t,o)&&o!==n&&I(t,o,{get:()=>e[o],enumerable:!(r=A(e,o))||r.enumerable});return t},B=(t,e,n)=>(n=null!=t?x(N(t)):{},L(!e&&t&&t.__esModule?n:I(n,"default",{value:t,enumerable:!0}),t)),M=j(((t,e)=>{function n(t,e,n){function o(e){var n=y,r=m;return y=m=void 0,k=e,v=t.apply(r,n)}function i(t){return k=t,_=setTimeout(c,e),S?o(t):v}function u(t){var n=e-(t-E);return x?w(n,g-(t-k)):n}function l(t){var n=t-E;return void 0===E||n>=e||n<0||x&&t-k>=g}function c(){var t=T();if(l(t))return d(t);_=setTimeout(c,u(t))}function d(t){return _=void 0,I&&y?o(t):(y=m=void 0,v)}function f(){void 0!==_&&clearTimeout(_),k=0,y=E=m=_=void 0}function p(){return void 0===_?v:d(T())}function h(){var t=T(),n=l(t);if(y=arguments,m=this,E=t,n){if(void 0===_)return i(E);if(x)return _=setTimeout(c,e),o(E)}return void 0===_&&(_=setTimeout(c,e)),v}var y,m,g,v,_,E,k=0,S=!1,x=!1,I=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,r(n)&&(S=!!n.leading,g=(x="maxWait"in n)?b(a(n.maxWait)||0,e):g,I="trailing"in n?!!n.trailing:I),h.cancel=f,h.flush=p,h}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||o(t)&&v.call(t)==l}function a(t){if("number"==typeof t)return t;if(i(t))return u;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var n=f.test(t);return n||p.test(t)?h(t.slice(2),n?2:8):d.test(t)?u:+t}var s="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,p=/^0o[0-7]+$/i,h=parseInt,y="object"==typeof window&&window&&window.Object===Object&&window,m="object"==typeof self&&self&&self.Object===Object&&self,g=y||m||Function("return this")(),v=Object.prototype.toString,b=Math.max,w=Math.min,T=function(){return g.Date.now()};e.exports=n})),P=j(((t,e)=>{var n,r;n=t,r=function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=r(n(1));t.exports=o.default},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function i(){}function a(){var t=h.shift();if(t){var e=d.last(t);e.afterDequeue(),t.stream=s.apply(void 0,t),e.afterStreamStart()}}function s(t,e,n){function r(t){t=n.beforeWrite(t),y.write(t),n.afterWrite(t)}(y=new c.default(t,n)).id=p++,y.name=n.name||y.id,u.streams[y.name]=y;var o=t.ownerDocument,s={close:o.close,open:o.open,write:o.write,writeln:o.writeln};l(o,{close:i,open:i,write:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r(e.join(""))},writeln:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r(e.join("")+"\n")}});var d=y.win.onerror||i;return y.win.onerror=function(t,e,r){n.error({msg:t+" - "+e+": "+r}),d.apply(y.win,[t,e,r])},y.write(e,(function(){l(o,s),y.win.onerror=d,n.done(),y=null,a()})),y}function u(t,e,n){if(d.isFunction(n))n={done:n};else if("clear"===n)return h=[],y=null,void(p=0);n=d.defaults(n,f);var r=[t=/^#/.test(t)?window.document.getElementById(t.substr(1)):t.jquery?t[0]:t,e,n];return t.postscribe={cancel:function(){r.stream?r.stream.abort():r[1]=i}},n.beforeEnqueue(r),h.push(r),y||a(),t.postscribe}e.__esModule=!0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=u;var c=o(n(2)),d=r(n(4)),f={afterAsync:i,afterDequeue:i,afterStreamStart:i,afterWrite:i,autoFix:!0,beforeEnqueue:i,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:i,error:function(t){throw new Error(t.msg)},releaseAsync:!1},p=0,h=[],y=null;l(u,{streams:{},queue:h,WriteStream:c.default})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var n=f+e,r=t.getAttribute(n);return c.existy(r)?String(r):r}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=f+e;c.existy(n)&&""!==n?t.setAttribute(r,n):t.removeAttribute(r)}e.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=o(n(3)),c=r(n(4)),d=!1,f="data-ps-",p="ps-style",h="ps-script",y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.root=e,this.options=n,this.doc=e.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new l.default("",{autoFix:n.autoFix}),this.actuals=[e],this.proxyHistory="",this.proxyRoot=this.doc.createElement(e.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return t.prototype.write=function(){var t;for((t=this.writeQueue).push.apply(t,arguments);!this.deferredRemote&&this.writeQueue.length;){var e=this.writeQueue.shift();c.isFunction(e)?this._callFunction(e):this._writeImpl(e)}},t.prototype._callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this._onScriptStart(e),t.call(this.win,this.doc),this._onScriptDone(e)},t.prototype._writeImpl=function(t){this.parser.append(t);for(var e=void 0,n=void 0,r=void 0,o=[];(e=this.parser.readToken())&&!(n=c.isScript(e))&&!(r=c.isStyle(e));)(e=this.options.beforeWriteToken(e))&&o.push(e);o.length>0&&this._writeStaticTokens(o),n&&this._handleScriptToken(e),r&&this._handleStyleToken(e)},t.prototype._writeStaticTokens=function(t){var e=this._buildChunk(t);return e.actual?(e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,d&&(e.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),d&&(e.actualInnerHTML=this.root.innerHTML),e):null},t.prototype._buildChunk=function(t){for(var e=this.actuals.length,n=[],r=[],o=[],i=t.length,a=0;a<i;a++){var s=t[a],u=s.toString();if(n.push(u),s.attrs){if(!/^noscript$/i.test(s.tagName)){var l=e++;r.push(u.replace(/(\/?>)/," "+f+"id="+l+" $1")),s.attrs.id!==h&&s.attrs.id!==p&&o.push("atomicTag"===s.type?"":"<"+s.tagName+" "+f+"proxyof="+l+(s.unary?" />":">"))}}else r.push(u),o.push("endTag"===s.type?u:"")}return{tokens:t,raw:n.join(""),actual:r.join(""),proxy:o.join("")}},t.prototype._walkChunk=function(){for(var t=void 0,e=[this.proxyRoot];c.existy(t=e.shift());){var n=1===t.nodeType;if(!n||!a(t,"proxyof")){n&&(this.actuals[a(t,"id")]=t,s(t,"id"));var r=t.parentNode&&a(t.parentNode,"proxyof");r&&this.actuals[r].appendChild(t)}e.unshift.apply(e,c.toArray(t.childNodes))}},t.prototype._handleScriptToken=function(t){var e=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),t.src=t.attrs.src||t.attrs.SRC,(t=this.options.beforeWriteToken(t))&&(t.src&&this.scriptStack.length?this.deferredRemote=t:this._onScriptStart(t),this._writeScriptToken(t,(function(){e._onScriptDone(t)})))},t.prototype._handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",(t=this.options.beforeWriteToken(t))&&this._writeStyleToken(t),e&&this.write()},t.prototype._writeStyleToken=function(t){var e=this._buildStyle(t);this._insertCursor(e,p),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},t.prototype._buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),c.eachKey(t.attrs,(function(t,n){e.setAttribute(t,n)})),e},t.prototype._insertCursor=function(t,e){this._writeImpl('<span id="'+e+'"/>');var n=this.doc.getElementById(e);n&&n.parentNode.replaceChild(t,n)},t.prototype._onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},t.prototype._onScriptDone=function(t){t===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,t.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},t.prototype._writeScriptToken=function(t,e){var n=this._buildScript(t),r=this._shouldRelease(n),o=this.options.afterAsync;t.src&&(n.src=t.src,this._scriptLoadHandler(n,r?o:function(){e(),o()}));try{this._insertCursor(n,h),(!n.src||r)&&e()}catch(t){this.options.error(t),e()}},t.prototype._buildScript=function(t){var e=this.doc.createElement(t.tagName);return c.eachKey(t.attrs,(function(t,n){e.setAttribute(t,n)})),t.content&&(e.text=t.content),e},t.prototype._scriptLoadHandler=function(t,e){function n(){t=t.onload=t.onreadystatechange=t.onerror=null}function r(){n(),null!=e&&e(),e=null}function o(t){n(),a(t),null!=e&&e(),e=null}function i(t,e){var n=t["on"+e];null!=n&&(t["_on"+e]=n)}var a=this.options.error;i(t,"load"),i(t,"error"),u(t,{onload:function(){if(t._onload)try{t._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){o({msg:"onload handler failed "+e+" @ "+t.src})}r()},onerror:function(){if(t._onerror)try{t._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(e){return void o({msg:"onerror handler failed "+e+" @ "+t.src})}o({msg:"remote script failed "+t.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&r()}})},t.prototype._shouldRelease=function(t){return!/^script$/i.test(t.nodeName)||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},t}();e.default=y},function(t){var e;e=function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=r(n(1));t.exports=o.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=o(n(2)),s=o(n(3)),u=r(n(6)),l=n(5),c={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},d=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.stream=n;var o=!1,s={};for(var l in a)a.hasOwnProperty(l)&&(r.autoFix&&(s[l+"Fix"]=!0),o=o||s[l+"Fix"]);o?(this._readToken=(0,u.default)(this,s,(function(){return e._readTokenImpl()})),this._peekToken=(0,u.default)(this,s,(function(){return e._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return t.prototype.append=function(t){this.stream+=t},t.prototype.prepend=function(t){this.stream=t+this.stream},t.prototype._readTokenImpl=function(){var t=this._peekTokenImpl();if(t)return this.stream=this.stream.slice(t.length),t},t.prototype._peekTokenImpl=function(){for(var t in c)if(c.hasOwnProperty(t)&&c[t].test(this.stream)){var e=s[t](this.stream);if(e)return"startTag"===e.type&&/script|style/i.test(e.tagName)?null:(e.text=this.stream.substr(0,e.length),e)}},t.prototype.peekToken=function(){return this._peekToken()},t.prototype.readToken=function(){return this._readToken()},t.prototype.readTokens=function(t){for(var e=void 0;e=this.readToken();)if(t[e.type]&&!1===t[e.type](e))return},t.prototype.clear=function(){var t=this.stream;return this.stream="",t},t.prototype.rest=function(){return this.stream},t}();for(var f in e.default=d,d.tokenToString=function(t){return t.toString()},d.escapeAttributes=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=(0,l.escapeQuotes)(t[n],null));return e},d.supports=a,a)a.hasOwnProperty(f)&&(d.browserHasFlaw=d.browserHasFlaw||!a[f]&&f)},function(t,e){"use strict";e.__esModule=!0;var n=!1,r=!1,o=window.document.createElement("div");try{var i="<P><I></P></I>";o.innerHTML=i,e.tagSoup=n=o.innerHTML!==i}catch{e.tagSoup=n=!1}try{o.innerHTML="<P><i><P></P></i></P>",e.selfClose=r=2===o.childNodes.length}catch{e.selfClose=r=!1}o=null,e.tagSoup=n,e.selfClose=r},function(t,e,n){"use strict";function r(t){var e=t.indexOf("-->");if(e>=0)return new l.CommentToken(t.substr(4,e-1),e+3)}function o(t){var e=t.indexOf("<");return new l.CharsToken(e>=0?e:t.length)}function i(t){var e,n,r;if(-1!==t.indexOf(">")){var o=t.match(c.startTag);if(o){var i=(e={},n={},r=o[2],o[2].replace(c.attr,(function(t,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(e[arguments[5]]="",n[arguments[5]]=!0):e[o]=arguments[2]||arguments[3]||arguments[4]||c.fillAttr.test(o)&&o||"":e[o]="",r=r.replace(t,"")})),{v:new l.StartTagToken(o[1],o[0].length,e,n,!!o[3],r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===i?"undefined":u(i)))return i.v}}}function a(t){var e=i(t);if(e){var n=t.slice(e.length);if(n.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var r=n.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(r)return new l.AtomicTagToken(e.tagName,r[0].length+e.length,e.attrs,e.booleanAttrs,r[1])}}}function s(t){var e=t.match(c.endTag);if(e)return new l.EndTagToken(e[1],e[0].length)}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.comment=r,e.chars=o,e.startTag=i,e.atomicTag=a,e.endTag=s;var l=n(4),c={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.EndTagToken=e.AtomicTagToken=e.StartTagToken=e.TagToken=e.CharsToken=e.CommentToken=e.Token=void 0;var o=n(5),i=(e.Token=function t(e,n){r(this,t),this.type=e,this.length=n,this.text=""},e.CommentToken=function(){function t(e,n){r(this,t),this.type="comment",this.length=n||(e?e.length:0),this.text="",this.content=e}return t.prototype.toString=function(){return"<!--"+this.content},t}(),e.CharsToken=function(){function t(e){r(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),e.TagToken=function(){function t(e,n,o,i,a){r(this,t),this.type=e,this.length=o,this.text="",this.tagName=n,this.attrs=i,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1}return t.formatTag=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="<"+t.tagName;for(var r in t.attrs)if(t.attrs.hasOwnProperty(r)){n+=" "+r;var i=t.attrs[r];(void 0===t.booleanAttrs||void 0===t.booleanAttrs[r])&&(n+='="'+(0,o.escapeQuotes)(i)+'"')}return t.rest&&(n+=" "+t.rest),t.unary&&!t.html5Unary?n+="/>":n+=">",null!=e&&(n+=e+"</"+t.tagName+">"),n},t}());e.StartTagToken=function(){function t(e,n,o,i,a,s){r(this,t),this.type="startTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.html5Unary=!1,this.unary=a,this.rest=s}return t.prototype.toString=function(){return i.formatTag(this)},t}(),e.AtomicTagToken=function(){function t(e,n,o,i,a){r(this,t),this.type="atomicTag",this.length=n,this.text="",this.tagName=e,this.attrs=o,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1,this.content=a}return t.prototype.toString=function(){return i.formatTag(this,this.content)},t}(),e.EndTagToken=function(){function t(e,n){r(this,t),this.type="endTag",this.length=n,this.text="",this.tagName=e}return t.prototype.toString=function(){return"</"+this.tagName+">"},t}()},function(t,e){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?t.replace(/([^"]*)"/g,(function(t,e){return/\\/.test(e)?e+'"':e+'\\"'})):e}e.__esModule=!0,e.escapeQuotes=n},function(t,e){"use strict";function n(t){return t&&"startTag"===t.type&&(t.unary=s.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t}function r(t,e){var r=t.stream,o=n(e());return t.stream=r,o}function o(t,e){var n=e.pop();t.prepend("</"+n.tagName+">")}function i(){var t=[];return t.last=function(){return this[this.length-1]},t.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},t.containsTagName=function(t){for(var e,n=0;e=this[n];n++)if(e.tagName===t)return!0;return!1},t}function a(t,e,a){function s(){var e=r(t,a);e&&c[e.type]&&c[e.type](e)}var l=i(),c={startTag:function(n){var r=n.tagName;"TR"===r.toUpperCase()&&l.lastTagNameEq("TABLE")?(t.prepend("<TBODY>"),s()):e.selfCloseFix&&u.test(r)&&l.containsTagName(r)?l.lastTagNameEq(r)?o(t,l):(t.prepend("</"+n.tagName+">"),s()):n.unary||l.push(n)},endTag:function(n){l.last()?e.tagSoupFix&&!l.lastTagNameEq(n.tagName)?o(t,l):l.pop():e.tagSoupFix&&(a(),s())}};return function(){return s(),n(a())}}e.__esModule=!0,e.default=a;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,u=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},t.exports=e()},function(t,e){"use strict";function n(t){return null!=t}function r(t){return"function"==typeof t}function o(t,e,n){var r=void 0,o=t&&t.length||0;for(r=0;r<o;r++)e.call(n,t[r],r)}function i(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n,r,t[r])}function a(t,e){return t=t||{},i(e,(function(e,r){n(t[e])||(t[e]=r)})),t}function s(t){try{return Array.prototype.slice.call(t)}catch{var e=(n=[],o(t,(function(t){n.push(t)})),{v:n});if("object"===(void 0===e?"undefined":f(e)))return e.v}var n}function u(t){return t[t.length-1]}function l(t,e){return!(!t||"startTag"!==t.type&&"atomicTag"!==t.type||!("tagName"in t)||!~t.tagName.toLowerCase().indexOf(e))}function c(t){return l(t,"script")}function d(t){return l(t,"style")}e.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.existy=n,e.isFunction=r,e.each=o,e.eachKey=i,e.defaults=a,e.toArray=s,e.last=u,e.isTag=l,e.isScript=c,e.isStyle=d}])},"object"==typeof t&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof t?t.postscribe=r():n.postscribe=r()})),F=!1,R=0,{body:q}=document,H=(B(M()),'button, [href], input:not([type="hidden"]), select, textarea, [tabindex="0"]'),D=({triggerElementId:t,dropdownContentId:e})=>{var n;let r=document.getElementById(e);document.getElementById(t).setAttribute("aria-expanded","true"),r.style.display="block",null==(n=r.querySelector(H))||n.focus()},W=({triggerElementId:t,dropdownContentId:e,onClose:n})=>{var r;let o=document.getElementById(e);o&&(null==(r=document.getElementById(t))||r.setAttribute("aria-expanded","false"),o.style.removeProperty("display"),null==n||n())},$=({triggerElementId:t,dropdownContentId:e,dropdownContentCloseButtonId:n,onClose:r,onOpen:o})=>{var i;let a=document.getElementById(t),s=document.getElementById(e);if(!a||!s||"true"===a.dataset.dropdownInitialized)return;a.setAttribute("aria-expanded","false"),a.setAttribute("aria-controls",e),a.setAttribute("aria-haspopup","true"),a.setAttribute("data-dropdown-initialized","true");let u=({key:n})=>{"Escape"===n?"true"===a.getAttribute("aria-expanded")&&(W({triggerElementId:t,dropdownContentId:e,onClose:c}),a.focus()):"Tab"===n&&(null!=s&&s.contains(document.activeElement)||W({triggerElementId:t,dropdownContentId:e,onClose:c}))},l=({target:n})=>{let r=document.getElementById(t);r&&n!==r&&!s.contains(n)&&!r.contains(n)&&(W({triggerElementId:t,dropdownContentId:e,onClose:c}),n.matches(H)||r.focus())},c=()=>{null==r||r(),document.removeEventListener("keyup",u),document.removeEventListener("click",l)};return a.addEventListener("click",(()=>{var n;"true"===(null==(n=document.getElementById(t))?void 0:n.getAttribute("aria-expanded"))?W({triggerElementId:t,dropdownContentId:e,onClose:c}):(D({triggerElementId:t,dropdownContentId:e}),null==o||o(),document.addEventListener("keyup",u),document.addEventListener("click",l))})),n&&(null==(i=document.getElementById(n))||i.addEventListener("click",(()=>{var n;W({triggerElementId:t,dropdownContentId:e,onClose:c}),null==(n=document.getElementById(t))||n.focus()}))),{closeDropdown:()=>{W({triggerElementId:t,dropdownContentId:e,onClose:c})}}},z=(t=null)=>{let e=/DEV-Native-android|ForemWebView/i.test(navigator.userAgent)&&"undefined"!=typeof AndroidBridge,n=!0;return e&&t&&(n=null!=AndroidBridge[t]),e&&n},U=t=>new Promise(((e,n)=>{z("copyToClipboard")?(AndroidBridge.copyToClipboard(t),e()):null!=navigator.clipboard?navigator.clipboard.writeText(t).then((()=>{e()})).catch((t=>{n(t)})):n("Unable to copy the text. Try reloading the page")})),Q=document.getElementsByClassName("js-fullscreen-code-action");Q&&s(Q);var K=document.getElementById("reaction-drawer-trigger");K&&"true"!==K.dataset.initialized&&$({triggerElementId:"reaction-drawer-trigger",dropdownContentId:"reaction-drawer"});var Y,Z=document.getElementById("article-show-more-button");if("true"!==Z.dataset.initialized){if(z("shareText"))Z.addEventListener("click",(()=>AndroidBridge.shareText(location.href)));else{let{closeDropdown:t}=$({triggerElementId:"article-show-more-button",dropdownContentId:"article-show-more-dropdown",onClose:w});document.querySelectorAll("#article-show-more-dropdown [href]").forEach((e=>{e.addEventListener("click",(e=>{t(e)}))}))}Z.dataset.initialized="true"}null==(Y=document.getElementById("copy-post-url-button"))||Y.addEventListener("click",k);var J=document.querySelector("#comments");J&&v(J),c(),_(),b(),E()})();