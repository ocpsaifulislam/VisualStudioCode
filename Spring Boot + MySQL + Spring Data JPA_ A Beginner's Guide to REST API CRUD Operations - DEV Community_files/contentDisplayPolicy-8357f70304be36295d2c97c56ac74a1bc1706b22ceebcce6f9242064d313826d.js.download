(()=>{function e(){let e=Array.from(document.querySelectorAll("article[data-content-user-id]")),t=userData(),n=t?t.blocked_user_ids:[];e.filter((e=>{let{contentUserId:t}=e.dataset;return n.includes(parseInt(t,10))})).forEach((e=>{if(e.className.includes("crayons-story"))e.style.display="none";else if(e.className.includes("single-comment-node")){e.getElementsByClassName("inner-comment")[0].innerHTML='\n        <div class="body " style="padding-bottom:32px;opacity:0.3;user-select:none;cursor:default">\n          [blocked content]\n        </div>\n      '}}))}function t(){function e(e){fetch(`/comments/${e}/unhide`,{method:"PATCH",headers:{"X-CSRF-Token":window.csrfToken}}).then((e=>e.json())).then((e=>{"false"===e.hidden&&location.reload()}))}function t(e,t){document.getElementById("hide-comments-modal__form").action=`/comments/${e}/hide`,document.getElementById("hide-comments-modal__report-link").href=`/report-abuse?url=${t}`,document.getElementById("hide-comments-modal__comment-permalink").href=t,window.Forem.showModal({title:"Confirm hiding the comment",contentSelector:"#hide-comments-modal",overlay:!0}).then((()=>{document.querySelector("#window-modal .hide-comments-modal__form").addEventListener("submit",n)}))}Array.from(document.getElementsByClassName("hide-comment")).forEach((e=>{let{commentId:n,commentUrl:o}=e.dataset;e.addEventListener("click",(e=>{e.preventDefault(),t(n,o)}))})),Array.from(document.getElementsByClassName("unhide-comment")).forEach((t=>{let{commentId:n}=t.dataset;t.addEventListener("click",(t=>{t.preventDefault(),e(n)}))}));let n=e=>{e.preventDefault(),e.stopPropagation();let{target:t}=e,n=t.getElementsByClassName("hide_children")[0],o=`${t.action}${n.checked?"?hide_children=1":""}`;fetch(o,{method:"PATCH",headers:{"X-CSRF-Token":window.csrfToken}}).then((e=>e.json())).then((e=>{"true"===e.hidden&&location.reload()}))}}window.addEventListener("checkBlockedContent",e),window.InstantClick.on("change",(()=>{e(),t()})),e(),t()})();